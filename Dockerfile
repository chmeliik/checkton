FROM registry.fedoraproject.org/fedora-minimal:40@sha256:db7063868f49a9e9ecb552e8ea5886e505b02629b4ee33cd70a4eba971019b32

RUN microdnf -y install \
        --setopt install_weak_deps=false \
        --setopt tsflags=nodocs \
        ${AUTOGENERATED_START:-} \
        csdiff \
        git \
        jq \
        python-unversioned-command \
        sarif-fmt \
        ShellCheck \
        ${AUTOGENERATED_END:-} \
    && microdnf clean all

COPY src/ /opt/checkton/

CMD ["/opt/checkton/action.sh"]
